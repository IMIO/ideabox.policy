<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="ideabox.policy">
    <body>
        <metal:main fill-slot="main"
                    tal:define="images_url view/get_images_url;
                                current_state view/review_state;
                                timeline_states view/timeline_states">
        <h1 tal:content="context/Title"></h1>

        <div class="documentByLine"
             id="plone-document-byline"
             tal:condition="view/before_selected"
             i18n:domain="plone">
        <tal:creator tal:define="creator_short_form view/creator;"
                     tal:condition="creator_short_form">
        <tal:name tal:define="creator_long_form string:?author=${creator_short_form};
                              creator_is_openid python:'/' in creator_short_form;
                              creator_id python:(creator_short_form, creator_long_form)[creator_is_openid];">
          <span class="documentAuthor">
            <tal:i18n i18n:translate="label_by_author">
            by
            <a href="#"
               tal:attributes="href string:${context/@@plone_portal_state/navigation_root_url}/author/${creator_id}"
               tal:content="view/authorname"
               tal:omit-tag="python:view.author() is None"
               i18n:name="author">Roland Barthes</a>
            </tal:i18n>
          </span>
        </tal:name>
        </tal:creator>
        </div>
        <p class="theme discreet" tal:condition="context/project_theme" tal:content="context/project_theme" i18n:translate=""></p>

        <div class="field" tal:condition="context/description">
          <div class="richTextWidget richtext-field"><p tal:content="context/description"></p></div>
        </div>

        <div id="timeline" class="steps_5" i18n:domain="plone" tal:condition="view/can_view_timeline">
            <ol id="timeline-line"><tal:block tal:repeat="state timeline_states"><li tal:attributes="class python: state['state'] == current_state and 'current' or ''" tal:define="date state/date"
                ><div class="step"><tal:block condition="date"><div tal:content="python: date.strftime('%d')"></div><div tal:content="python: date.strftime('%b')"></div></tal:block></div></li></tal:block></ol>
            <ol id="timeline-text"><tal:block tal:repeat="state timeline_states"><li tal:attributes="class python: state['state'] == current_state and 'current' or ''"><div tal:content="state/state" i18n:translate=""></div></li></tal:block></ol>
        </div>

        <div tal:content="structure here/@@rating"></div>

        <div class="field">
          <div id="form-widgets-body" class="richTextWidget richtext-field" tal:content="structure context/body/raw|context/body"></div>
        </div>

        <tal:block tal:repeat="image_url images_url">
          <div class="img_project" tal:attributes="style string: background-image:url(${image_url})"></div>
        </tal:block>
        </metal:main>
    </body>
</html>
